{"version":3,"sources":["webpack:///./js/src/single_pages/Me.jsx"],"names":["LOGOUT","gql","ME","MeForm","log","props","data","logout","refetch","React","Component","propTypes","PropTypes","func","object","answer","bool","Me","location","history","useState","setAnswer","useMutation","onCompleted","logoutAnswer","loading","error","useQuery","setLoggedOut","push"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;CAGA;;AACA;AAEA,IAAMA,MAAM,GAAGC,kDAAH,mBAAZ;AAMA,IAAMC,EAAE,GAAGD,kDAAH,oBAAR;;IASME,M;;;;;;;;;;;;;6BACK;AAAA;;AACLC,yDAAG,CAAC,KAAKC,KAAL,CAAWC,IAAZ,CAAH;AACF,aACE,wEACI,sEADJ,EACS,sEADT,EACc,sEADd,EACmB,sEADnB,EACwB,sEADxB,EAC6B,sEAD7B,EAEI,sEAFJ,EAES,sEAFT,EAEc,sEAFd,EAEmB,sEAFnB,EAEwB,sEAFxB,EAE6B,sEAF7B,QAIE,kFACa,GADb,EAEI;AACI,eAAO,EAAE,mBAAM;AACX,eAAI,CAACD,KAAL,CAAWE,MAAX;AACH;AAHL,oBAFJ,EAUI;AACI,eAAO,EAAE,mBAAM;AACX,eAAI,CAACF,KAAL,CAAWG,OAAX;AACH;AAHL,mBAVJ,CAJF,CADF;AAyBD;;;;EA5BkBC,4CAAK,CAACC,S;;AA+B3BP,MAAM,CAACQ,SAAP,GAAmB;AACfJ,QAAM,EAAEK,iDAAS,CAACC,IADH;AAEfL,SAAO,EAAEI,iDAAS,CAACC,IAFJ;AAGfP,MAAI,EAAEM,iDAAS,CAACE,MAHD;AAIfC,QAAM,EAAEH,iDAAS,CAACI;AAJH,CAAnB;AAOe,SAASC,EAAT,OAAmC;AAAA,MAArBC,QAAqB,QAArBA,QAAqB;AAAA,MAAXC,OAAW,QAAXA,OAAW;;AAAA,kBAClBC,sDAAQ,CAAC,IAAD,CADU;AAAA;AAAA,MACvCL,MADuC;AAAA,MAC/BM,SAD+B;;AAAA,qBAETC,uEAAW,CAACtB,MAAD,EAAS;AACrDuB,eADqD,8BACf;AAAA,UAAhBC,YAAgB,SAAxBjB,MAAwB;AAClCc,eAAS,CAACG,YAAD,CAAT;AACH;AAHoD,GAAT,CAFF;AAAA;AAAA,MAEvCjB,MAFuC;AAAA;AAAA,MAE7BkB,OAF6B,kBAE7BA,OAF6B;AAAA,MAEpBC,KAFoB,kBAEpBA,KAFoB;;AAAA,kBAQrBC,oEAAQ,CAACzB,EAAD,CARa;AAAA,MAQvCI,IARuC,aAQvCA,IARuC;AAAA,MAQjCE,OARiC,aAQjCA,OARiC;;AAS9C,MAAIiB,OAAJ,EAAa,OAAO,2DAAC,2DAAD,OAAP;AACb,MAAIC,KAAJ,EAAW,OAAO,0FAAP;;AACX,MAAIX,MAAJ,EAAY;AACRa,oEAAY;AACZT,WAAO,CAACU,IAAR,CAAa,GAAb;AACH;;AAED,SAAO,2DAAC,MAAD;AAAQ,UAAM,EAAEtB,MAAhB;AAAwB,UAAM,EAAEQ,MAAhC;AAAwC,QAAI,EAAET,IAA9C;AAAoD,WAAO,EAAEE;AAA7D,IAAP;AACH,C","file":"7.concrete5_graphql_websocket_security_sample.js","sourcesContent":["import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useMutation, useQuery } from \"@apollo/react-hooks\";\nimport gql from \"graphql-tag\";\n\nimport Loading from \"../components/Loading\";\nimport { setLoggedOut } from \"Utils/Token\";\n\n// eslint-disable-next-line no-unused-vars\nimport log from \"Log\";\n\nconst LOGOUT = gql`\n    mutation logout {\n        logout\n    }\n`;\n\nconst ME = gql`\n    query me {\n        me {\n            uName\n            anonymus\n        }\n    }\n`;\n\nclass MeForm extends React.Component {\n  render() {\n      log(this.props.data);\n    return (\n      <div>\n          <br/><br/><br/><br/><br/><br/>\n          <br/><br/><br/><br/><br/><br/>\n        Me\n        <p>\n            Welcome!{\" \"}\n            <button\n                onClick={() => {\n                    this.props.logout();\n                }}\n            >\n                Sign out\n            </button>\n\n            <button\n                onClick={() => {\n                    this.props.refetch();\n                }}\n            >\n                Refetch\n            </button>\n        </p>\n      </div>\n    );\n  }\n}\n\nMeForm.propTypes = {\n    logout: PropTypes.func,\n    refetch: PropTypes.func,\n    data: PropTypes.object,\n    answer: PropTypes.bool\n};\n\nexport default function Me({ location, history }) {\n    const [answer, setAnswer] = useState(null);\n    const [logout, { loading, error }] = useMutation(LOGOUT, {\n        onCompleted({ logout: logoutAnswer }) {\n            setAnswer(logoutAnswer );\n        }\n    });\n\n  const {  data, refetch } = useQuery(ME);\n    if (loading) return <Loading />;\n    if (error) return <p>An error occurred</p>;\n    if (answer) {\n        setLoggedOut();\n        history.push(\"/\");\n    }\n\n    return <MeForm logout={logout} answer={answer} data={data} refetch={refetch} />;\n}\n"],"sourceRoot":""}