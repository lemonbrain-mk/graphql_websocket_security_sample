{"version":3,"sources":["webpack:///./js/src/single_pages/Me.jsx"],"names":["LOGOUT","gql","ME","MeForm","props","data","me","uName","anonymus","logout","refetch","React","Component","propTypes","PropTypes","func","object","answer","bool","Me","location","history","useState","setAnswer","useMutation","onCompleted","logoutAnswer","setIsLoggedIn","authToken","setLoggedOut","push","loading","error","useQuery"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;CAGA;;AACA;AAEA,IAAMA,MAAM,GAAGC,kDAAH,mBAAZ;AASA,IAAMC,EAAE,GAAGD,kDAAH,oBAAR;;IASME,M;;;;;;;;;;;;;6BACK;AAAA;;AACP,aACE,wEACI,sEADJ,EACS,sEADT,EACc,sEADd,EACmB,sEADnB,EACwB,sEADxB,EAC6B,sEAD7B,EAEI,sEAFJ,EAES,sEAFT,EAEc,sEAFd,EAEmB,sEAFnB,EAEwB,sEAFxB,EAE6B,sEAF7B,QAIE,kFACa,KAAKC,KAAL,CAAWC,IAAX,GAAkB,KAAKD,KAAL,CAAWC,IAAX,CAAgBC,EAAhB,CAAmBC,KAArC,GAA6C,EAD1D,OAC+D,KAAKH,KAAL,CAAWC,IAAX,GAAkB,KAAKD,KAAL,CAAWC,IAAX,CAAgBC,EAAhB,CAAmBE,QAArC,GAAgD,EAD/G,EAEI;AACI,eAAO,EAAE,mBAAM;AACX,eAAI,CAACJ,KAAL,CAAWK,MAAX;AACH;AAHL,oBAFJ,EAUI;AACI,eAAO,EAAE,mBAAM;AACX,eAAI,CAACL,KAAL,CAAWM,OAAX;AACH;AAHL,mBAVJ,CAJF,CADF;AAyBD;;;;EA3BkBC,4CAAK,CAACC,S;;AA8B3BT,MAAM,CAACU,SAAP,GAAmB;AACfJ,QAAM,EAAEK,iDAAS,CAACC,IADH;AAEfL,SAAO,EAAEI,iDAAS,CAACC,IAFJ;AAGfV,MAAI,EAAES,iDAAS,CAACE,MAHD;AAIfC,QAAM,EAAEH,iDAAS,CAACI;AAJH,CAAnB;AAOe,SAASC,EAAT,OAAmC;AAAA,MAArBC,QAAqB,QAArBA,QAAqB;AAAA,MAAXC,OAAW,QAAXA,OAAW;;AAAA,kBAClBC,sDAAQ,CAAC,IAAD,CADU;AAAA;AAAA,MACvCL,MADuC;AAAA,MAC/BM,SAD+B;;AAAA,qBAETC,uEAAW,CAACxB,MAAD,EAAS;AACrDyB,eADqD,8BACf;AAAA,UAAhBC,YAAgB,SAAxBjB,MAAwB;AAClCkB,uEAAa,CAACD,YAAY,CAACE,SAAd,CAAb;AACAC,sEAAY;AACZR,aAAO,CAACS,IAAR,CAAa,QAAb;AACH;AALoD,GAAT,CAFF;AAAA;AAAA,MAEvCrB,MAFuC;AAAA;AAAA,MAE7BsB,OAF6B,kBAE7BA,OAF6B;AAAA,MAEpBC,KAFoB,kBAEpBA,KAFoB;;AAAA,kBAUrBC,oEAAQ,CAAC/B,EAAD,CAVa;AAAA,MAUvCG,IAVuC,aAUvCA,IAVuC;AAAA,MAUjCK,OAViC,aAUjCA,OAViC;;AAW9C,MAAIqB,OAAJ,EAAa,OAAO,2DAAC,2DAAD,OAAP;AACb,MAAIC,KAAJ,EAAW,OAAO,0FAAP;AAEX,SAAO,2DAAC,MAAD;AAAQ,UAAM,EAAEvB,MAAhB;AAAwB,UAAM,EAAEQ,MAAhC;AAAwC,QAAI,EAAEZ,IAA9C;AAAoD,WAAO,EAAEK;AAA7D,IAAP;AACH,C","file":"6.concrete5_graphql_websocket_security_sample.js","sourcesContent":["import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useMutation, useQuery } from \"@apollo/react-hooks\";\nimport gql from \"graphql-tag\";\n\nimport Loading from \"../components/Loading\";\nimport { setLoggedOut, setIsLoggedIn } from \"Utils/Token\";\n\n// eslint-disable-next-line no-unused-vars\nimport log from \"Log\";\n\nconst LOGOUT = gql`\n    mutation logout {\n        logout {\n            authToken\n            error\n        }\n    }\n`;\n\nconst ME = gql`\n    query me {\n        me {\n            uName\n            anonymus\n        }\n    }\n`;\n\nclass MeForm extends React.Component {\n  render() {\n    return (\n      <div>\n          <br/><br/><br/><br/><br/><br/>\n          <br/><br/><br/><br/><br/><br/>\n        Me\n        <p>\n            Welcome {this.props.data ? this.props.data.me.uName : ''} {this.props.data ? this.props.data.me.anonymus : ''}\n            <button\n                onClick={() => {\n                    this.props.logout();\n                }}\n            >\n                Sign out\n            </button>\n\n            <button\n                onClick={() => {\n                    this.props.refetch();\n                }}\n            >\n                Refetch\n            </button>\n        </p>\n      </div>\n    );\n  }\n}\n\nMeForm.propTypes = {\n    logout: PropTypes.func,\n    refetch: PropTypes.func,\n    data: PropTypes.object,\n    answer: PropTypes.bool\n};\n\nexport default function Me({ location, history }) {\n    const [answer, setAnswer] = useState(null);\n    const [logout, { loading, error }] = useMutation(LOGOUT, {\n        onCompleted({ logout: logoutAnswer }) {\n            setIsLoggedIn(logoutAnswer.authToken);\n            setLoggedOut();\n            history.push(\"/login\");\n        }\n    });\n\n  const {  data, refetch } = useQuery(ME);\n    if (loading) return <Loading />;\n    if (error) return <p>An error occurred</p>;\n\n    return <MeForm logout={logout} answer={answer} data={data} refetch={refetch} />;\n}\n"],"sourceRoot":""}