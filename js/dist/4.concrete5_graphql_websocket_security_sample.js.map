{"version":3,"sources":["webpack:///./js/src/components/Login.jsx","webpack:///./js/src/oldJquery/LoadBackground.jsx","webpack:///./js/src/single_pages/Login.jsx"],"names":["LOGIN_USER","gql","LoginForm","props","state","uName","uPassword","uMaintainLogin","handleInputChange","bind","handleSignInSubmit","event","target","value","type","checked","name","setState","preventDefault","validateFormSuccess","login","React","Component","propTypes","PropTypes","func","Login","client","useApolloClient","useMutation","onCompleted","log","loading","error","loadBackground","setTimeout","fade_div","$","css","position","top","left","width","prependTo","height","hide","append","attr","fadeIn","shown","info","getJSON","image","data","children","link","text","author","join","window","on","find","backstretch","fade","LoadableForgotPassword","Loadable","loader","Loading","LoadableLogin","loadBackgroud","match","path","object"],"mappings":"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","file":"4.concrete5_graphql_websocket_security_sample.js","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\nimport { useApolloClient, useMutation } from \"@apollo/react-hooks\";\nimport gql from 'graphql-tag';\n\nimport Loading from \"./Loading\";\n\nimport log from 'Log';\n\nconst LOGIN_USER = gql`\n  mutation login($username: String!, $password: String!) {\n    login(username: $username, password: $password)\n  }\n`;\n\nclass LoginForm extends React.Component {\n    constructor(props) {\n      super(props);\n      \n      this.state = {\n        uName: '',\n        uPassword: '',\n        uMaintainLogin: false\n      };\n  \n      this.handleInputChange = this.handleInputChange.bind(this);\n      this.handleSignInSubmit = this.handleSignInSubmit.bind(this);\n    }\n\n    handleInputChange(event) {\n      const target = event.target;\n      const value = target.type === 'checkbox' ? target.checked : target.value;\n      const name = target.name;\n  \n      this.setState({\n        [name]: value\n      });\n    }\n\n    handleSignInSubmit(event) {\n      event.preventDefault();\n  \n      if (this.validateFormSuccess()) {\n        this.props.login(\n          this.state.uName,\n          this.state.uPassword\n        );\n      }\n    }\n\n  render() {\n    return (\n      <div className=\"authentication-type authentication-type-concrete active\">\n        <form\n          method=\"post\"\n          action=\"https://vivaelfutbol.lemonbrain.ch/login/authenticate/concrete\"\n        >\n          <div className=\"form-group\">\n            <label className=\"control-label\" htmlFor=\"uName\">\n              Email Address\n            </label>\n            <input\n              name=\"uName\"\n              id=\"uName\"\n              className=\"form-control\"\n              autoFocus=\"autofocus\"\n              value={this.state.uName}\n              onChange={this.handleInputChange}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label className=\"control-label\" htmlFor=\"uPassword\">\n              Password\n            </label>\n            <input\n              name=\"uPassword\"\n              id=\"uPassword\"\n              className=\"form-control\"\n              type=\"password\"\n              value={this.state.uPassword}\n              onChange={this.handleInputChange}\n            />\n          </div>\n\n          <div className=\"checkbox\">\n            <label>\n              <input \n              type=\"checkbox\" \n              name=\"uMaintainLogin\" \n              value=\"1\" \n              checked={this.state.uMaintainLogin}\n              onChange={this.handleInputChange}\n              />\n              Stay signed in for two weeks\n            </label>\n          </div>\n\n          <div className=\"form-group\">\n            <button className=\"btn btn-primary\">Log in</button>\n            <Link\n              to=\"/login/concrete/forgot_password\"\n              className=\"btn float-right\"\n            >\n              Forgot Password\n            </Link>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n\nLoginForm.propTypes = {\n  login: PropTypes.func,\n};\n\nexport default function Login() {\n   const client = useApolloClient();\n  const [login, { loading, error }] = useMutation(LOGIN_USER, {\n    onCompleted({ login }) {\n        log(login);\n    //   localStorage.setItem(\"token\", login);\n    //   client.writeData({ data: { isLoggedIn: true } });\n    }\n  });\n\n  if (loading) return <Loading />;\n  if (error) return <p>An error occurred</p>;\n\n  return <LoginForm login={login} />;\n}\n","const loadBackground = function() {\n    setTimeout(function() {\n      var fade_div = $(\"<div/>\")\n        .css({\n          position: \"absolute\",\n          top: 0,\n          left: 0,\n          width: \"100%\"\n        })\n        .prependTo(\"body\")\n        .height(\"200px\");\n\n      fade_div\n        .hide()\n        .append(\n          $(\"<img/>\")\n            .css({ width: \"100%\", height: \"100%\" })\n            .attr(\"src\", \"/concrete/images/login_fade.png\")\n        )\n        .fadeIn();\n    }, 0);\n\n    $(function() {\n      var shown = false,\n        info;\n      $.getJSON(\n        \"https://vivaelfutbol.lemonbrain.ch/index.php/tools/required/dashboard/get_image_data\",\n        { image: \"20190806.jpg\" },\n        function(data) {\n          if (shown) {\n            $(\"div.ccm-page-background-credit\")\n              .fadeIn()\n              .children()\n              .attr(\"href\", data.link)\n              .text(data.author.join());\n          } else {\n            info = data;\n          }\n        }\n      );\n      $(window).on(\"backstretch.show\", function() {\n        shown = true;\n\n        if (info) {\n          $(\"div.ccm-page-background-credit\")\n            .fadeIn()\n            .find(\"div.ccm-page-background-photo-credit\")\n            .children()\n            .attr(\"href\", info.link)\n            .text(info.author.join());\n        }\n      });\n      $.backstretch(\"//backgroundimages.concrete5.org/wallpaper/20190806.jpg\", {\n        fade: 500\n      });\n    });\n};\n\nexport default loadBackground;","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Route, Switch } from \"react-router-dom\";\nimport Loadable from \"react-loadable\";\n\nimport Loading from \"../components/Loading\";\nimport LoginForm from \"../components/Login\";\n\nimport loadBackgroud from \"../oldJquery/LoadBackground\";\n\nconst LoadableForgotPassword = Loadable({\n  loader: () => import(\"../components/ForgotPassword\"),\n  loading: Loading\n});\n\nconst LoadableLogin = Loadable({\n  loader: () => import(\"../components/Login\"),\n  loading: Loading\n});\n\nclass Login extends React.Component {\n  componentDidMount() {\n    loadBackgroud();\n  }\n\n  render() {\n    const { match } = this.props;\n\n    return (\n      <div>\n        <div className=\"container\">\n          <div className=\"login-page row\">\n            <div className=\"col-sm-6 offset-sm-3\">\n              <h1>Sign In.</h1>\n            </div>\n            <div className=\"col-sm-6 offset-sm-3 login-form\">\n              <div className=\"row login-row\">\n                <div className=\"controls col-sm-12 col-xs-12\">\n                  <Switch>\n                    <Route\n                      path={`${match.path}/concrete/forgot_password`}\n                      component={LoadableForgotPassword}\n                    />\n                    <Route exact path={match.path} render={(props) => <LoginForm {...props} />} />\n                  </Switch>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"ccm-page-background-credit\">\n          <div className=\"ccm-page-background-privacy-notice float-left\">\n            Image served from concrete5.org.{\" \"}\n            <a\n              href=\"//www.concrete5.org/legal/privacy-policy\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              View Privacy Policy\n            </a>\n            .{\" \"}\n          </div>\n          <div className=\"ccm-page-background-photo-credit float-right\">\n            Photo Credit:{\" \"}\n            <a href=\"http://www.flickr.com/photos/jurvetson/5276291364/\">\n              Steve Jurvetson\n            </a>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nLogin.propTypes = {\n  match: PropTypes.object\n};\n\nexport default Login;\n"],"sourceRoot":""}